<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vizitka</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{min-height:100vh;display:flex;justify-content:center;align-items:center;background: linear-gradient(135deg,#141E30,#243B55);}
.card{width:380px;background: rgba(255,255,255,0.08);backdrop-filter: blur(20px);border-radius:25px;padding:30px;text-align:center;color:white;box-shadow:0 20px 40px rgba(0,0,0,0.6);}
.image-box{width:100%;height:300px;overflow:hidden;border-radius:20px;margin-bottom:20px;display:flex;align-items:center;justify-content:center;}
.image-box img{width:100%;height:100%;object-fit:cover;object-position:center;}
h2{margin:20px 0;font-weight:600;font-size:22px;}
.btn{display:flex;align-items:center;justify-content:center;gap:10px;text-decoration:none;color:white;padding:15px;margin:12px 0;border-radius:15px;font-weight:500;transition:0.3s;font-size:16px;}
.call{background: linear-gradient(45deg,#00b09b,#96c93d);}
.sms{background: linear-gradient(45deg,#ff512f,#dd2476);}
.telegram{background: linear-gradient(45deg,#0088cc,#005f8d);}
.btn:hover{transform: translateY(-5px);box-shadow:0 10px 20px rgba(0,0,0,0.6);}
.footer{margin-top:15px;font-size:12px;opacity:0.7;}
</style>
</head>
<body>
<div class="card">
    <div class="image-box">
        <img id="profileImage" src="" alt="Profile">
    </div>
    <h2 id="name">Yuklanmoqda...</h2>
    <a id="callBtn" href="#" class="btn call"><i class="fa-solid fa-phone"></i> Qo'ng'iroq qilish</a>
    <a id="smsBtn" href="#" class="btn sms"><i class="fa-solid fa-comment-sms"></i> SMS yozish</a>
    <a id="tgBtn" href="#" class="btn telegram"><i class="fa-brands fa-telegram"></i> Telegramdan yozish</a>
    <div class="footer">QR orqali tezkor aloqa</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const supabaseUrl = 'YOUR_SUPABASE_URL';
const supabaseKey = 'YOUR_ANON_KEY';
const supabase = Supabase.createClient(supabaseUrl, supabaseKey);

const params = new URLSearchParams(window.location.search);
const id = params.get('id');

async function loadUser(){
    if(!id) return;
    const { data } = await supabase.from('users').select('*').eq('id', id).single();
    if(data){
        document.getElementById('name').innerText = data.name;
        document.getElementById('callBtn').href = "tel:" + data.phone;
        document.getElementById('smsBtn').href = "sms:" + data.phone;
        document.getElementById('tgBtn').href = "https://t.me/" + data.telegram;
        document.getElementById('profileImage').src = data.image_url;
    } else {
        document.getElementById('name').innerText = "Foydalanuvchi topilmadi";
    }
}

loadUser();
</script>
</body>
</html>
