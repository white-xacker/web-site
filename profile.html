<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { background:linear-gradient(135deg,#0f172a,#1e293b); color:white; font-family:sans-serif; display:flex; justify-content:center; align-items:center; min-height:100vh; margin:0; }
        .card { width:350px; background:rgba(255,255,255,0.1); backdrop-filter:blur(10px); padding:25px; border-radius:30px; text-align:center; border:1px solid rgba(255,255,255,0.1); }
        .img-box { width:100%; height:300px; border-radius:20px; overflow:hidden; margin-bottom:20px; }
        .img-box img { width:100%; height:100%; object-fit:cover; }
        .btn { display:flex; align-items:center; justify-content:center; gap:10px; text-decoration:none; color:white; padding:15px; margin:10px 0; border-radius:15px; font-weight:bold; }
        .call { background:#10b981; } .sms { background:#f43f5e; } .tg { background:#0ea5e9; }
    </style>
</head>
<body>
    <div id="box"></div>
    <script>
        const SB_URL = "https://vakuoatitkvxgkkyhzyi.supabase.co";
        const SB_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZha3VvYXRpdGt2eGdra3loenlpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA3OTY3MjgsImV4cCI6MjA4NjM3MjcyOH0.-gERCw7PtwYZLM78SMs7_OLM5tLkaM8qVpmmQ_joMEo";
        const _supabase = supabase.createClient(SB_URL, SB_KEY);

        async function load() {
            const id = new URLSearchParams(window.location.search).get('id');
            const { data } = await _supabase.from('users').select('*').eq('id', id).single();
            if(data) {
                document.getElementById('box').innerHTML = `
                <div class="card">
                    <div class="img-box"><img src="${data.image_url}"></div>
                    <h2>${data.name}</h2>
                    <a href="tel:${data.phone}" class="btn call"><i class="fa-solid fa-phone"></i> Qo'ng'iroq</a>
                    <a href="sms:${data.phone}" class="btn sms"><i class="fa-solid fa-comment-sms"></i> SMS yozish</a>
                    <a href="https://t.me/${data.telegram}" class="btn tg"><i class="fa-brands fa-telegram"></i> Telegram</a>
                </div>`;
            }
        }
        load();
    </script>
</body>
</html>